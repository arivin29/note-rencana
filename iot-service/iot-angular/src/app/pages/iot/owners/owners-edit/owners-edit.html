<div class="d-flex align-items-center mb-3">
  <div>
    <ul class="breadcrumb mb-1">
      <li class="breadcrumb-item"><a href="javascript:;">IoT</a></li>
      <li class="breadcrumb-item"><a routerLink="/iot/owners">Owners</a></li>
      <li class="breadcrumb-item active">Edit</li>
    </ul>
    <h1 class="page-header mb-0">Edit Owner {{ ownerId }}</h1>
  </div>
  <div class="ms-auto">
    <a routerLink="/iot/owners" class="btn btn-outline-default">Back</a>
  </div>
</div>
<card class="shadow-sm">
  <card-body>
    <!-- Loading State -->
    <div *ngIf="loading" class="text-center py-5">
      <div class="spinner-border text-theme" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-2 text-muted">Loading owner data...</p>
    </div>

    <!-- Form -->
    <form *ngIf="!loading" #ownerEditForm="ngForm" (ngSubmit)="handleSubmit(ownerEditForm.valid ?? false)">
      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label text-muted text-uppercase small">Owner Name *</label>
          <input type="text" class="form-control" name="name" [(ngModel)]="formModel.name" required>
          <div class="form-text">Nama resmi perusahaan atau organisasi</div>
        </div>
        <div class="col-md-6">
          <label class="form-label text-muted text-uppercase small">Industry *</label>
          <select class="form-select" name="industry" [(ngModel)]="formModel.industry" required>
            <option value="">-- Select Industry --</option>
            <option *ngFor="let option of industryOptions" [ngValue]="option">{{ option }}</option>
          </select>
          <div class="form-text">Sektor industri owner</div>
        </div>
        <div class="col-md-6">
          <label class="form-label text-muted text-uppercase small">Contact Person</label>
          <input class="form-control" name="contactPerson" [(ngModel)]="formModel.contactPerson">
          <div class="form-text">Nama PIC utama (optional)</div>
        </div>
        <div class="col-md-6">
          <label class="form-label text-muted text-uppercase small">SLA Level</label>
          <select class="form-select text-capitalize" name="slaLevel" [(ngModel)]="formModel.slaLevel">
            <option value="">-- Select SLA --</option>
            <option *ngFor="let option of slaOptions" [ngValue]="option">{{ option | titlecase }}</option>
          </select>
          <div class="form-text">Service Level Agreement tier</div>
        </div>
      </div>

      <div class="d-flex gap-2 mt-4">
        <button type="button" class="btn btn-outline-default" routerLink="/iot/owners">
          <i class="fa fa-times me-1"></i>
          Cancel
        </button>
        <button type="submit" class="btn btn-theme" [disabled]="ownerEditForm.invalid || saving">
          <span *ngIf="!saving"><i class="fa fa-save me-2"></i>Save Changes</span>
          <span *ngIf="saving"><i class="fa fa-spinner fa-spin me-2"></i>Saving...</span>
        </button>
      </div>

      <div class="alert alert-success mt-3" *ngIf="successMessage">
        <i class="fa fa-check-circle me-2"></i>
        {{ successMessage }}
      </div>
      <div class="alert alert-danger mt-3" *ngIf="errorMessage">
        <i class="fa fa-exclamation-triangle me-2"></i>
        {{ errorMessage }}
      </div>
    </form>
  </card-body>
</card>
